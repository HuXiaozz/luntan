(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f31c9f14"],{"190b":function(t,e,a){},"2df3":function(t,e,a){"use strict";a("190b")},"6b55":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-full"},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[a("i",{staticClass:"fa fa fa-book"},[t._v(" 主题 / 更新主题")])])]),a("div",[a("el-form",{ref:"topic",staticClass:"demo-topic",attrs:{model:t.newdata.topic}},[a("el-form-item",{attrs:{prop:"title"}},[a("el-input",{attrs:{placeholder:"输入新的主题名称"},model:{value:t.newdata.topic.title,callback:function(e){t.$set(t.newdata.topic,"title",e)},expression:"newdata.topic.title"}})],1),a("div",{attrs:{id:"vditor"}}),a("b-taginput",{staticClass:"my-3",attrs:{maxlength:"15",maxtags:"3",ellipsis:"",placeholder:"请输入主题标签，限制为 15 个字符和 3 个标签"},model:{value:t.newdata.tags,callback:function(e){t.$set(t.newdata,"tags",e)},expression:"newdata.tags"}}),a("el-form-item",{staticClass:"mt-3"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleUpdate()}}},[t._v("更新 ")]),a("el-button",{on:{click:function(e){return t.resetForm("topic")}}},[t._v("重置")])],1)],1)],1)])],1)])])},o=[],i=(a("d81d"),a("b0c0"),a("caf6")),s=a("ff41"),c=a.n(s),r=(a("2f2f"),{name:"TopicEdit",components:{},data:function(){return{newdata:{topic:{},tags:[]}}},created:function(){this.fetchTopic()},methods:{renderMarkdown:function(t){var e=this;console.log(t),this.contentEditor=new c.a("vditor",{height:460,placeholder:"输入要更新的内容",preview:{hljs:{style:"monokai"}},mode:"sv",after:function(){e.contentEditor.setValue(t)}})},fetchTopic:function(){var t=this;Object(i["d"])(this.$route.params.id).then((function(e){console.log(e),t.newdata.topic=e.data.topic,t.newdata.tags=e.data.tags.map((function(t){return t.name})),t.renderMarkdown(t.newdata.topic.content),console.log("this.newdata"),console.log(t.newdata)}))},handleUpdate:function(){var t=this;this.newdata.topic.content=this.contentEditor.getValue(),console.log(this.newdata),Object(i["f"])(this.newdata).then((function(e){var a=e.data;console.log(a),setTimeout((function(){t.$router.push({name:"post-detail",params:{id:a.id}})}),800)}))},resetForm:function(t){this.$refs[t].resetFields(),this.contentEditor.setValue(""),this.newdata.tags=[]}}}),l=r,d=(a("2df3"),a("2877")),u=Object(d["a"])(l,n,o,!1,null,null,null);e["default"]=u.exports},d81d:function(t,e,a){"use strict";var n=a("23e7"),o=a("b727").map,i=a("1dde"),s=i("map");n({target:"Array",proto:!0,forced:!s},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-f31c9f14.84dfdd17.js.map